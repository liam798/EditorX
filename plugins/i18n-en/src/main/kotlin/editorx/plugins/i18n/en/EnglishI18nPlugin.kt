package editorx.plugins.i18n.en

import editorx.core.i18n.I18nKeys
import editorx.core.i18n.I18nPlugin
import editorx.core.plugin.PluginInfo
import java.util.Locale
import kotlin.collections.buildMap

private val dictionary = buildMap {
    put(I18nKeys.Menu.FILE, "File")
    put(I18nKeys.Menu.EDIT, "Edit")
    put(I18nKeys.Menu.PLUGINS, "Plugins")
    put(I18nKeys.Menu.HELP, "Help")
    put(I18nKeys.Menu.LANGUAGE, "Language")

    put(I18nKeys.Action.OPEN_FILE, "Open File…")
    put(I18nKeys.Action.OPEN_FOLDER, "Open Folder…")
    put(I18nKeys.Action.RECENT, "Recent Files")
    put(I18nKeys.Action.SAVE, "Save")
    put(I18nKeys.Action.SAVE_AS, "Save As…")
    put(I18nKeys.Action.EXIT, "Quit")
    put(I18nKeys.Action.UNDO, "Undo")
    put(I18nKeys.Action.REDO, "Redo")
    put(I18nKeys.Action.FIND, "Find…")
    put(I18nKeys.Action.REPLACE, "Replace…")
    put(I18nKeys.Action.GLOBAL_SEARCH, "Search in Files…")
    put(I18nKeys.Action.PLUGIN_MANAGER, "Plugin Manager")
    put(I18nKeys.Action.ABOUT, "About")
    put(I18nKeys.Action.HELP, "Help")
    put(I18nKeys.Action.NEW_FILE, "New File")
    put(I18nKeys.Action.NEW_FOLDER, "New Folder")
    put(I18nKeys.Action.DELETE, "Delete")
    put(I18nKeys.Action.REFRESH, "Refresh")
    put(I18nKeys.Action.REVEAL_IN_SYSTEM, "Reveal in System")
    put(I18nKeys.Action.COPY_PATH, "Copy Path")
    put(I18nKeys.Action.SELECT_IN_SIDEBAR, "Select in Sidebar")
    put(I18nKeys.Action.REVEAL_IN_EXPLORER, "Reveal in Explorer")
    put(I18nKeys.Action.CLOSE, "Close")
    put(I18nKeys.Action.CLOSE_OTHERS, "Close Others")
    put(I18nKeys.Action.CLOSE_ALL, "Close All")
    put(I18nKeys.Action.CLOSE_LEFT, "Close Left")
    put(I18nKeys.Action.CLOSE_RIGHT, "Close Right")
    put(I18nKeys.Action.CLOSE_UNMODIFIED, "Close Unmodified")
    put(I18nKeys.Action.FORMAT_FILE, "Format File")
    put(I18nKeys.Action.RESET, "Reset")
    put(I18nKeys.Action.CANCEL, "Cancel")
    put(I18nKeys.Action.CONFIRM, "Confirm")
    put(I18nKeys.Action.INSTALL_PLUGIN, "Install Plugin")
    put(I18nKeys.Action.OPEN_PLUGINS_FOLDER, "Open Plugins Folder")
    put(I18nKeys.Action.ENABLE, "Enable")
    put(I18nKeys.Action.DISABLE, "Disable")
    put(I18nKeys.Action.UNINSTALL, "Uninstall")
    put(I18nKeys.Action.REVERT_CHANGES, "Revert Changes")

    put(I18nKeys.Settings.TITLE, "Preferences")
    put(I18nKeys.Settings.PREFERENCES, "Preferences")
    put(I18nKeys.Settings.APPEARANCE, "Appearance")
    put(I18nKeys.Settings.LANGUAGE, "Language")
    put(I18nKeys.Settings.THEME, "Theme")
    put(I18nKeys.Settings.APPEARANCE_TIP, "Tip: language and theme changes apply immediately.")
    put(I18nKeys.Settings.KEYMAP, "Keymap")
    put(I18nKeys.Settings.PLUGINS, "Plugins")
    put(I18nKeys.Settings.CACHE, "Cache")
    put(I18nKeys.Settings.KEYMAP_TITLE, "Keymap")
    put(I18nKeys.Settings.KEYMAP_HINT, "<html>Current list shows default shortcuts. Customization/export is under planning.</html>")
    put(I18nKeys.Settings.ADD_NOTE, "Add Note…")
    put(I18nKeys.Settings.ADD_NOTE_TOOLTIP, "Shortcut customization is under development")
    put(I18nKeys.Settings.EXPORT, "Export…")
    put(I18nKeys.Settings.EXPORT_TOOLTIP, "Feature under development")
    put(I18nKeys.Settings.CACHE_TITLE, "Cache")
    put(I18nKeys.Settings.CACHE_HINT, "Clear cache only when no background decompile tasks are running.")
    put(I18nKeys.Settings.REFRESH_CACHE, "Refresh")
    put(I18nKeys.Settings.CLEAR_SELECTED, "Clear Selected")
    put(I18nKeys.Settings.OPEN_FOLDER, "Open Folder")
    put(I18nKeys.Settings.PLUGIN_STATE_DISABLED, "Disabled")
    put(I18nKeys.Settings.PLUGIN_STATE_ENABLED, "Enabled")
    put(I18nKeys.Settings.PLUGIN_STATE_FAILED, "Failed")

    put(I18nKeys.CacheTable.NAME, "Name")
    put(I18nKeys.CacheTable.PATH, "Path")
    put(I18nKeys.CacheTable.SIZE, "Size")
    put(I18nKeys.CacheTable.DESCRIPTION, "Description")

    put(I18nKeys.Theme.LIGHT, "Light")
    put(I18nKeys.Theme.DARK, "Dark")

    put(I18nKeys.Status.READY, "Ready")
    put(I18nKeys.Status.CANCEL, "Cancel")
    put(I18nKeys.Status.GOTO_LINE_COLUMN, "Go to Line/Column")
    put(I18nKeys.Status.ERROR, "Error")
    put(I18nKeys.Status.WARNING, "Warning")
    put(I18nKeys.Status.SUCCESS, "Success")
    put(I18nKeys.Status.VERSION_CONTROL, "Version Control")
    put(I18nKeys.Status.NO_FILE_OPENED, "No file opened")
    put(I18nKeys.Status.LINE_COLUMN, "Line %d, Column %d")

    put(I18nKeys.FindReplace.SEARCH, "Search")
    put(I18nKeys.FindReplace.REPLACE, "Replace")
    put(I18nKeys.FindReplace.EXPAND_REPLACE, "Expand Replace")
    put(I18nKeys.FindReplace.COLLAPSE_REPLACE, "Collapse Replace")
    put(I18nKeys.FindReplace.MATCH_CASE, "Match Case")
    put(I18nKeys.FindReplace.WHOLE_WORD, "Whole Word")
    put(I18nKeys.FindReplace.REGEX, "Regex")
    put(I18nKeys.FindReplace.REPLACE_ONE, "Replace")
    put(I18nKeys.FindReplace.REPLACE_ALL, "Replace All")
    put(I18nKeys.FindReplace.REPLACE_ONE_TOOLTIP, "Replace current match")
    put(I18nKeys.FindReplace.REPLACE_ALL_TOOLTIP, "Replace all matches")
    put(I18nKeys.FindReplace.FIND_PREV, "Previous (Shift+Enter)")
    put(I18nKeys.FindReplace.FIND_NEXT, "Next (Enter)")
    put(I18nKeys.FindReplace.CLOSE, "Close")
    put(I18nKeys.FindReplace.NO_RESULTS, "0 results")
    put(I18nKeys.FindReplace.RESULTS, "%d/%d")
    put(I18nKeys.FindReplace.INVALID_REGEX, "Invalid regex")
    put(I18nKeys.FindReplace.SEARCH_FAILED, "Search failed")
    put(I18nKeys.FindReplace.REPLACE_FAILED, "Replace failed")

    put(I18nKeys.Dialog.SELECT_FOLDER, "Select Folder")
    put(I18nKeys.Dialog.TIP, "Tip")
    put(I18nKeys.Dialog.ABOUT_TITLE, "About EditorX")
    put(I18nKeys.Dialog.ABOUT_MESSAGE, """EditorX v1.0

A tool for editing APK files

Features:
• Syntax highlighting editor
• Plugin system support
• Multi-tab interface
• File browsing and management

Developed by: XiaMao Tools""")
    put(I18nKeys.Dialog.HELP_NOT_IMPLEMENTED, "Help documentation not implemented")
    put(I18nKeys.Dialog.NO_RECENT_FILES, "(None)")
    put(I18nKeys.Dialog.FILE_NOT_EXISTS, "File does not exist")
    put(I18nKeys.Dialog.NOT_FOUND, "Not found")
    put(I18nKeys.Dialog.ERROR, "Error")
    put(I18nKeys.Dialog.INFO, "Info")
    put(I18nKeys.Dialog.SELECT_ENTRY_FIRST, "Select an entry first.")
    put(I18nKeys.Dialog.DIRECTORY_NOT_FOUND, "Directory not found: %s")
    put(I18nKeys.Dialog.CLEAR_CACHE, "Clear Cache")
    put(I18nKeys.Dialog.CLEARED, "Cleared")
    put(I18nKeys.Dialog.CLEAR_FAILED, "Failed to clear, files may be in use.")
    put(I18nKeys.Dialog.UNABLE_TO_OPEN, "Unable to open: %s")

    put(I18nKeys.Explorer.TITLE, "Explorer")
    put(I18nKeys.Explorer.NEW_FILE, "New File")
    put(I18nKeys.Explorer.NEW_FOLDER, "New Folder")
    put(I18nKeys.Explorer.DELETE, "Delete")
    put(I18nKeys.Explorer.REFRESH, "Refresh")
    put(I18nKeys.Explorer.REVEAL_IN_SYSTEM, "Reveal in System")
    put(I18nKeys.Explorer.VIEW_MODE_PROJECT, "Project")
    put(I18nKeys.Explorer.WORKSPACE_NOT_OPENED, "Workspace not opened")

    put(I18nKeys.Editor.CLOSE, "Close")
    put(I18nKeys.Editor.CLOSE_OTHERS, "Close Others")
    put(I18nKeys.Editor.CLOSE_ALL, "Close All")
    put(I18nKeys.Editor.CLOSE_LEFT, "Close Left")
    put(I18nKeys.Editor.CLOSE_RIGHT, "Close Right")
    put(I18nKeys.Editor.CLOSE_UNMODIFIED, "Close Unmodified")
    put(I18nKeys.Editor.FORMAT_FILE, "Format File")
    put(I18nKeys.Editor.CANNOT_READ_FILE, "Cannot read file: %s")
    put(I18nKeys.Editor.TOTAL_FILES, "Total %d files/directories")
    put(I18nKeys.Editor.CANNOT_READ_ARCHIVE, "Cannot read archive")

    put(I18nKeys.Toolbar.GOTO_MANIFEST, "Open AndroidManifest.xml")
    put(I18nKeys.Toolbar.GOTO_MAIN_ACTIVITY, "Open MainActivity")
    put(I18nKeys.Toolbar.GOTO_APPLICATION, "Open Application")
    put(I18nKeys.Toolbar.EDIT_APP_INFO, "Edit App Info")
    put(I18nKeys.Toolbar.EDIT_APP_LOCALES, "App Name Locales")
    put(I18nKeys.Toolbar.EDIT_APP_ICONS, "Icon Densities")
    put(I18nKeys.Toolbar.BUILD, "Build")
    put(I18nKeys.Toolbar.TOGGLE_SIDEBAR, "Toggle Sidebar")
    put(I18nKeys.Toolbar.GLOBAL_SEARCH, "Global Search")
    put(I18nKeys.Toolbar.SETTINGS, "Open Settings")
    put(I18nKeys.Toolbar.DOUBLE_SHIFT, "Double Shift")

    put(I18nKeys.Search.SEARCH, "Search")
    put(I18nKeys.Search.STOP, "Stop")
    put(I18nKeys.Search.SEARCH_LABEL, "Search:")
    put(I18nKeys.Search.PLEASE_ENTER_SEARCH, "Please enter search content")
    put(I18nKeys.Search.PLEASE_OPEN_FOLDER, "Please open a folder (workspace) first before global search")
    put(I18nKeys.Search.SCANNED_FILES, "Scanned %d files, found %d results")

    put(I18nKeys.Welcome.RECENT_PROJECTS, "Recent projects")
    put(I18nKeys.Welcome.VIEW_ALL, "View all")
    put(I18nKeys.Welcome.NO_RECENT_PROJECTS, "No recent projects")
    put(I18nKeys.Welcome.NEW_FILE, "New File")
    put(I18nKeys.Welcome.OPEN_FILE, "Open File")
    put(I18nKeys.Welcome.OPEN_PROJECT, "Open Project")

    put(I18nKeys.Navigation.NO_FILE_OPENED, "No file opened")
    put(I18nKeys.Navigation.COPY_PATH, "Copy Path")
    put(I18nKeys.Navigation.SELECT_IN_SIDEBAR, "Select in Sidebar")
    put(I18nKeys.Navigation.REVEAL_IN_EXPLORER, "Reveal in Explorer")

    put(I18nKeys.Plugins.NO_PLUGIN_SELECTED, "No plugin selected")
    put(I18nKeys.Plugins.ID, "ID")
    put(I18nKeys.Plugins.VERSION, "Version")
    put(I18nKeys.Plugins.ORIGIN, "Origin")
    put(I18nKeys.Plugins.STATE, "State")
    put(I18nKeys.Plugins.PATH, "Path")
    put(I18nKeys.Plugins.PLUGINS_COUNT, "%d plugins")
    put(I18nKeys.Plugins.SCAN_COMPLETED, "Scan completed")
    put(I18nKeys.Plugins.ENABLED, "Enabled: %s")
    put(I18nKeys.Plugins.DISABLED, "Disabled: %s")
    put(I18nKeys.Plugins.REMOVED, "Removed: %s")
    put(I18nKeys.Plugins.BUNDLED, "Bundled")
    put(I18nKeys.Plugins.BUILTIN_CANNOT_UNINSTALL, "Built-in plugins cannot be uninstalled.\nPlugin: %s (%s)")
    put(I18nKeys.Plugins.CONFIRM_UNINSTALL, "Remove plugin %s (%s)?\nIf it is a JAR plugin, also remove the file from plugins/ directory.")
    put(I18nKeys.Plugins.UNINSTALL_FAILED, "Failed to uninstall plugin: %s (%s)")
    put(I18nKeys.Plugins.NO_PLUGIN_ENTRY, "Copied to plugins/, but no new plugin entry detected (check META-INF/services).")
    put(I18nKeys.Plugins.INSTALLED_AND_STARTED, "Installed and started: %s")

    put(I18nKeys.Keymap.ACTION, "Action")
    put(I18nKeys.Keymap.SHORTCUT, "Shortcut")
    put(I18nKeys.Keymap.DESCRIPTION, "Description")

    put(I18nKeys.ToolbarMessage.COMPILING, "Compiling, please wait…")
    put(I18nKeys.ToolbarMessage.COMPILING_TITLE, "Compiling")
    put(I18nKeys.ToolbarMessage.NOT_APKTOOL_DIR, "Current workspace is not an apktool decompiled directory (missing apktool.yml)")
    put(I18nKeys.ToolbarMessage.CANNOT_COMPILE, "Cannot compile")
    put(I18nKeys.ToolbarMessage.COMPILING_APK, "Compiling APK...")
    put(I18nKeys.ToolbarMessage.SIGNING_APK, "Signing APK...")
    put(I18nKeys.ToolbarMessage.COMPILE_AND_SIGN_SUCCESS, "APK compiled and signed: %s")
    put(I18nKeys.ToolbarMessage.APK_GENERATED, "APK generated and signed with debug certificate:\n%s")
    put(I18nKeys.ToolbarMessage.COMPILE_COMPLETE, "Compile Complete")
    put(I18nKeys.ToolbarMessage.SIGN_FAILED, "Sign failed: %s")
    put(I18nKeys.ToolbarMessage.SIGN_FAILED_DETAIL, "APK compiled successfully, but signing failed:\n%s")
    put(I18nKeys.ToolbarMessage.APKTOOL_NOT_FOUND, "apktool not found")
    put(I18nKeys.ToolbarMessage.APKTOOL_NOT_FOUND_DETAIL, "apktool not found. Executable should be placed in toolchain/apktool or tools/apktool, or added to PATH")
    put(I18nKeys.ToolbarMessage.COMPILE_CANCELLED, "APK compilation cancelled")
    put(I18nKeys.ToolbarMessage.COMPILE_FAILED, "APK compilation failed (exit=%d)")
    put(I18nKeys.ToolbarMessage.COMPILE_FAILED_DETAIL, "apktool compilation failed (exit=%d)\n%s")
    put(I18nKeys.ToolbarMessage.COMPILE_EXCEPTION, "Exception during compilation: %s")
    put(I18nKeys.ToolbarMessage.KEYSTORE_NOT_FOUND, "Cannot find or create ~/.android/debug.keystore")
    put(I18nKeys.ToolbarMessage.APKSIGNER_NOT_FOUND, "apksigner not found. Please set ANDROID_HOME/ANDROID_SDK_ROOT or add apksigner to PATH")
    put(I18nKeys.ToolbarMessage.SIGN_EXCEPTION, "Unknown error during signing")
    put(I18nKeys.ToolbarMessage.MANIFEST_NOT_FOUND, "AndroidManifest.xml not found\nPath: %s")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_NOT_FOUND, "AndroidManifest.xml not found, cannot locate MainActivity")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_NOT_FOUND_DETAIL, "MainActivity not found in AndroidManifest.xml")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_SMALI_NOT_FOUND, "MainActivity smali file not found\nClass: %s\nExpected path: %s")
    put(I18nKeys.ToolbarMessage.PARSE_MANIFEST_FAILED, "Failed to parse AndroidManifest.xml: %s")
    put(I18nKeys.ToolbarMessage.APPLICATION_NOT_FOUND, "AndroidManifest.xml not found, cannot locate Application")
    put(I18nKeys.ToolbarMessage.APPLICATION_NOT_FOUND_DETAIL, "Custom Application not found in AndroidManifest.xml ")
    put(I18nKeys.ToolbarMessage.APPLICATION_SMALI_NOT_FOUND, "Application smali file not found\nClass: %s\nExpected path: %s")
    put(I18nKeys.ToolbarMessage.NO_BUILD_PROVIDER, "No build provider available for current workspace")
    put(I18nKeys.ToolbarMessage.BUILD_TOOL_NOT_FOUND, "Build tool not found")
    put(I18nKeys.ToolbarMessage.COMPILE_SUCCESS, "Build successful: %s")
    put(I18nKeys.ToolbarMessage.BUILD_GENERATED, "Build output generated:\n%s")

    put(I18nKeys.Cache.CACHE_CONTENT, "Cache")
    put(I18nKeys.Cache.LOGS, "Logs")
    put(I18nKeys.Cache.CACHE_DESC, "Workspace and plugin caches")
    put(I18nKeys.Cache.LOGS_DESC, "Runtime logs for troubleshooting")
    put(I18nKeys.Cache.CONFIRM_CLEAR, "Clear %s?\n%s")
    put(I18nKeys.Cache.CANNOT_DELETE, "Cannot delete: %s")

    put(I18nKeys.Dialog.SELECT_PLUGIN_JAR, "Select Plugin JAR")
    put(I18nKeys.Dialog.SELECT_FILE, "Select File")
    put(I18nKeys.Dialog.PATH_NOT_EXISTS, "Path does not exist: %s")
    put(I18nKeys.Dialog.UNABLE_TO_OPEN_SYSTEM, "Unable to open in system: %s")
    put(I18nKeys.Dialog.COPY_PATH_FAILED, "Copy path failed: %s")
    put(I18nKeys.Dialog.PATH_COPIED, "Path copied: %s")
    put(I18nKeys.Dialog.PLUGIN_SYSTEM_NOT_INIT, "Plugin system not initialized")
    put(I18nKeys.Dialog.WORKSPACE_NOT_OPENED, "Workspace not opened")
    put(I18nKeys.Dialog.SELECT_JAR_FILE, "Please select a .jar file")
    put(I18nKeys.Dialog.CONFIRM_OVERWRITE, "Plugin directory already contains file: %s\nOverwrite?")
    put(I18nKeys.Dialog.CANNOT_UNINSTALL, "Cannot Uninstall")
    put(I18nKeys.Dialog.CONFIRM_REMOVAL, "Confirm Removal")
    put(I18nKeys.Dialog.UNINSTALL_FAILED, "Failed to uninstall plugin: %s (%s)")
    put(I18nKeys.Dialog.COPY_FAILED, "Copy failed: %s")
    put(I18nKeys.Dialog.DELETE_RECENT_PROJECT, "Delete Recent Project")
    put(I18nKeys.Dialog.OPEN_APK_FILE, "Open APK File")
    put(I18nKeys.Dialog.DETECTED_APK, "APK file detected. Convert to project (decompile)?")
    put(I18nKeys.Dialog.LANGUAGE_CHANGED, "Language Changed")
    put(I18nKeys.Dialog.LANGUAGE_CHANGED_MESSAGE, "The new language will be displayed the next time the application starts.")
    put(I18nKeys.Dialog.RESTART_REQUIRED, "Restart Required")
    put(I18nKeys.Dialog.RESTART_REQUIRED_MESSAGE, "Restart EditorX to make changes take effect")
    put(I18nKeys.Dialog.RESTART, "Restart")
    put(I18nKeys.Dialog.LATER, "Later")

    // 快捷键描述
    put(I18nKeys.Shortcut.GLOBAL_SEARCH, "Open global search dialog")
    put(I18nKeys.Shortcut.OPEN_SETTINGS, "Open settings dialog")
    put(I18nKeys.Shortcut.FIND, "Focus search bar")
    put(I18nKeys.Shortcut.REPLACE, "Expand replace row")
    put(I18nKeys.Shortcut.SAVE, "Save current content")
    put(I18nKeys.Shortcut.CLOSE_TAB, "Close active tab")
    put(I18nKeys.Shortcut.FORMAT_FILE, "Format current file")
    
    // 语言名称使用动态生成的 key
    put(I18nKeys.Lang.forLocale(Locale.forLanguageTag("zh")), "Chinese")
    put(I18nKeys.Lang.forLocale(Locale.SIMPLIFIED_CHINESE), "Chinese (Simplified)")
    put(I18nKeys.Lang.forLocale(Locale.TRADITIONAL_CHINESE), "Chinese (Traditional)")
    put(I18nKeys.Lang.forLocale(Locale.ENGLISH), "English")
}

class EnglishI18nPlugin : I18nPlugin(Locale.ENGLISH) {

    override fun getInfo() = PluginInfo(
        id = "i18n-en",
        name = "English (i18n)",
        version = "0.0.1"
    )

    override fun translate(key: String): String? = dictionary[key]
}
