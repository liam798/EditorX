package editorx.plugins.i18n.zh

import editorx.core.i18n.I18nKeys
import editorx.core.i18n.I18nPlugin
import editorx.core.plugin.PluginInfo
import java.util.Locale
import kotlin.collections.buildMap

private val dictionary = buildMap {
    put(I18nKeys.Menu.FILE, "文件")
    put(I18nKeys.Menu.EDIT, "编辑")
    put(I18nKeys.Menu.PLUGINS, "插件")
    put(I18nKeys.Menu.HELP, "帮助")
    put(I18nKeys.Menu.LANGUAGE, "语言")

    put(I18nKeys.Action.OPEN_FILE, "打开文件…")
    put(I18nKeys.Action.OPEN_FOLDER, "打开文件夹…")
    put(I18nKeys.Action.RECENT, "最近打开")
    put(I18nKeys.Action.SAVE, "保存")
    put(I18nKeys.Action.SAVE_AS, "另存为…")
    put(I18nKeys.Action.EXIT, "退出")
    put(I18nKeys.Action.UNDO, "撤销")
    put(I18nKeys.Action.REDO, "重做")
    put(I18nKeys.Action.FIND, "查找…")
    put(I18nKeys.Action.REPLACE, "替换…")
    put(I18nKeys.Action.GLOBAL_SEARCH, "全局搜索")
    put(I18nKeys.Action.PLUGIN_MANAGER, "插件管理")
    put(I18nKeys.Action.ABOUT, "关于")
    put(I18nKeys.Action.HELP, "帮助文档")
    put(I18nKeys.Action.NEW_FILE, "新建文件")
    put(I18nKeys.Action.NEW_FOLDER, "新建文件夹")
    put(I18nKeys.Action.DELETE, "删除")
    put(I18nKeys.Action.REFRESH, "刷新")
    put(I18nKeys.Action.REVEAL_IN_SYSTEM, "在系统中显示")
    put(I18nKeys.Action.COPY_PATH, "复制路径")
    put(I18nKeys.Action.SELECT_IN_SIDEBAR, "在侧栏中选中")
    put(I18nKeys.Action.REVEAL_IN_EXPLORER, "在资源管理器中显示")
    put(I18nKeys.Action.CLOSE, "关闭")
    put(I18nKeys.Action.CLOSE_OTHERS, "关闭其他标签")
    put(I18nKeys.Action.CLOSE_ALL, "关闭所有标签")
    put(I18nKeys.Action.CLOSE_LEFT, "关闭左侧标签")
    put(I18nKeys.Action.CLOSE_RIGHT, "关闭右侧标签")
    put(I18nKeys.Action.CLOSE_UNMODIFIED, "关闭未修改标签")
    put(I18nKeys.Action.FORMAT_FILE, "格式化文件")
    put(I18nKeys.Action.RESET, "重置")
    put(I18nKeys.Action.CANCEL, "取消")
    put(I18nKeys.Action.CONFIRM, "确定")
    put(I18nKeys.Action.INSTALL_PLUGIN, "安装插件")
    put(I18nKeys.Action.OPEN_PLUGINS_FOLDER, "打开插件目录")
    put(I18nKeys.Action.ENABLE, "启用")
    put(I18nKeys.Action.DISABLE, "禁用")
    put(I18nKeys.Action.UNINSTALL, "卸载")
    put(I18nKeys.Action.REVERT_CHANGES, "还原更改")

    put(I18nKeys.Settings.TITLE, "设置")
    put(I18nKeys.Settings.PREFERENCES, "设置项")
    put(I18nKeys.Settings.APPEARANCE, "外观")
    put(I18nKeys.Settings.LANGUAGE, "语言")
    put(I18nKeys.Settings.THEME, "主题")
    put(I18nKeys.Settings.APPEARANCE_TIP, "提示：语言和主题切换立即生效。")
    put(I18nKeys.Settings.KEYMAP, "快捷键")
    put(I18nKeys.Settings.PLUGINS, "插件")
    put(I18nKeys.Settings.CACHE, "缓存")
    put(I18nKeys.Settings.KEYMAP_TITLE, "快捷键")
    put(I18nKeys.Settings.KEYMAP_HINT, "<html>当前列表展示默认快捷键，自定义与导出功能规划中。</html>")
    put(I18nKeys.Settings.ADD_NOTE, "添加备注…")
    put(I18nKeys.Settings.ADD_NOTE_TOOLTIP, "快捷键自定义功能开发中")
    put(I18nKeys.Settings.EXPORT, "导出配置…")
    put(I18nKeys.Settings.EXPORT_TOOLTIP, "功能开发中")
    put(I18nKeys.Settings.CACHE_TITLE, "缓存")
    put(I18nKeys.Settings.CACHE_HINT, "清理缓存前请确认不存在正在运行的反编译或插件任务。")
    put(I18nKeys.Settings.REFRESH_CACHE, "刷新")
    put(I18nKeys.Settings.CLEAR_SELECTED, "清理所选")
    put(I18nKeys.Settings.OPEN_FOLDER, "打开所在目录")
    put(I18nKeys.Settings.PLUGIN_STATE_DISABLED, "已禁用")
    put(I18nKeys.Settings.PLUGIN_STATE_ENABLED, "已启用")
    put(I18nKeys.Settings.PLUGIN_STATE_FAILED, "失败")

    put(I18nKeys.CacheTable.NAME, "名称")
    put(I18nKeys.CacheTable.PATH, "路径")
    put(I18nKeys.CacheTable.SIZE, "大小")
    put(I18nKeys.CacheTable.DESCRIPTION, "说明")

    put(I18nKeys.Theme.LIGHT, "浅色")
    put(I18nKeys.Theme.DARK, "深色")

    put(I18nKeys.Status.READY, "就绪")
    put(I18nKeys.Status.CANCEL, "取消")
    put(I18nKeys.Status.GOTO_LINE_COLUMN, "转到行/列")
    put(I18nKeys.Status.ERROR, "错误")
    put(I18nKeys.Status.WARNING, "警告")
    put(I18nKeys.Status.SUCCESS, "成功")
    put(I18nKeys.Status.VERSION_CONTROL, "版本控制")
    put(I18nKeys.Status.NO_FILE_OPENED, "未打开文件")
    put(I18nKeys.Status.LINE_COLUMN, "行 %d, 列 %d")

    put(I18nKeys.FindReplace.SEARCH, "搜索")
    put(I18nKeys.FindReplace.REPLACE, "替换")
    put(I18nKeys.FindReplace.EXPAND_REPLACE, "展开替换")
    put(I18nKeys.FindReplace.COLLAPSE_REPLACE, "收起替换")
    put(I18nKeys.FindReplace.MATCH_CASE, "区分大小写")
    put(I18nKeys.FindReplace.WHOLE_WORD, "全词匹配")
    put(I18nKeys.FindReplace.REGEX, "正则表达式")
    put(I18nKeys.FindReplace.REPLACE_ONE, "替换")
    put(I18nKeys.FindReplace.REPLACE_ALL, "全部替换")
    put(I18nKeys.FindReplace.REPLACE_ONE_TOOLTIP, "替换当前匹配")
    put(I18nKeys.FindReplace.REPLACE_ALL_TOOLTIP, "替换所有匹配")
    put(I18nKeys.FindReplace.FIND_PREV, "上一个（Shift+Enter）")
    put(I18nKeys.FindReplace.FIND_NEXT, "下一个（Enter）")
    put(I18nKeys.FindReplace.CLOSE, "关闭")
    put(I18nKeys.FindReplace.NO_RESULTS, "0 个结果")
    put(I18nKeys.FindReplace.RESULTS, "%d/%d")
    put(I18nKeys.FindReplace.INVALID_REGEX, "正则表达式不合法")
    put(I18nKeys.FindReplace.SEARCH_FAILED, "搜索失败")
    put(I18nKeys.FindReplace.REPLACE_FAILED, "替换失败")

    put(I18nKeys.Dialog.SELECT_FOLDER, "选择文件夹")
    put(I18nKeys.Dialog.TIP, "提示")
    put(I18nKeys.Dialog.ABOUT_TITLE, "关于 EditorX")
    put(I18nKeys.Dialog.ABOUT_MESSAGE, """EditorX v1.0

一个用于编辑APK文件的工具

功能特性：
• 语法高亮编辑
• 插件系统支持
• 多标签页界面
• 文件浏览和管理

开发：XiaMao Tools""")
    put(I18nKeys.Dialog.HELP_NOT_IMPLEMENTED, "帮助文档待实现")
    put(I18nKeys.Dialog.NO_RECENT_FILES, "(无)")
    put(I18nKeys.Dialog.FILE_NOT_EXISTS, "文件不存在")
    put(I18nKeys.Dialog.NOT_FOUND, "未找到")
    put(I18nKeys.Dialog.ERROR, "错误")
    put(I18nKeys.Dialog.INFO, "提示")
    put(I18nKeys.Dialog.SELECT_ENTRY_FIRST, "请选择要清理的缓存条目")
    put(I18nKeys.Dialog.DIRECTORY_NOT_FOUND, "目录不存在：%s")
    put(I18nKeys.Dialog.CLEAR_CACHE, "清理缓存")
    put(I18nKeys.Dialog.CLEARED, "已清理")
    put(I18nKeys.Dialog.CLEAR_FAILED, "清理失败，请检查文件是否被占用")
    put(I18nKeys.Dialog.UNABLE_TO_OPEN, "无法打开目录：%s")

    put(I18nKeys.Explorer.TITLE, "资源管理器")
    put(I18nKeys.Explorer.NEW_FILE, "新建文件")
    put(I18nKeys.Explorer.NEW_FOLDER, "新建文件夹")
    put(I18nKeys.Explorer.DELETE, "删除")
    put(I18nKeys.Explorer.REFRESH, "刷新")
    put(I18nKeys.Explorer.REVEAL_IN_SYSTEM, "在系统中显示")
    put(I18nKeys.Explorer.VIEW_MODE_PROJECT, "项目")
    put(I18nKeys.Explorer.WORKSPACE_NOT_OPENED, "未打开工作区")

    put(I18nKeys.Editor.CLOSE, "关闭")
    put(I18nKeys.Editor.CLOSE_OTHERS, "关闭其他标签")
    put(I18nKeys.Editor.CLOSE_ALL, "关闭所有标签")
    put(I18nKeys.Editor.CLOSE_LEFT, "关闭左侧标签")
    put(I18nKeys.Editor.CLOSE_RIGHT, "关闭右侧标签")
    put(I18nKeys.Editor.CLOSE_UNMODIFIED, "关闭未修改标签")
    put(I18nKeys.Editor.FORMAT_FILE, "格式化文件")
    put(I18nKeys.Editor.CANNOT_READ_FILE, "无法读取文件: %s")
    put(I18nKeys.Editor.TOTAL_FILES, "共 %d 个文件/目录")
    put(I18nKeys.Editor.CANNOT_READ_ARCHIVE, "无法读取压缩包")

    put(I18nKeys.Toolbar.GOTO_MANIFEST, "打开 AndroidManifest.xml")
    put(I18nKeys.Toolbar.GOTO_MAIN_ACTIVITY, "打开 MainActivity")
    put(I18nKeys.Toolbar.GOTO_APPLICATION, "打开 Application")
    put(I18nKeys.Toolbar.EDIT_APP_INFO, "修改 App 信息")
    put(I18nKeys.Toolbar.EDIT_APP_LOCALES, "应用名称多语言")
    put(I18nKeys.Toolbar.EDIT_APP_ICONS, "图标多尺寸")
    put(I18nKeys.Toolbar.BUILD, "构建")
    put(I18nKeys.Toolbar.TOGGLE_SIDEBAR, "切换侧边栏")
    put(I18nKeys.Toolbar.GLOBAL_SEARCH, "全局搜索")
    put(I18nKeys.Toolbar.SETTINGS, "打开设置")
    put(I18nKeys.Toolbar.DOUBLE_SHIFT, "双击Shift")

    put(I18nKeys.Search.SEARCH, "搜索")
    put(I18nKeys.Search.STOP, "停止")
    put(I18nKeys.Search.SEARCH_LABEL, "搜索：")
    put(I18nKeys.Search.PLEASE_ENTER_SEARCH, "请输入要搜索的内容")
    put(I18nKeys.Search.PLEASE_OPEN_FOLDER, "请先打开文件夹（工作区），再进行全局搜索")
    put(I18nKeys.Search.SCANNED_FILES, "已扫描 %d 个文件，找到 %d 条结果")

    put(I18nKeys.Welcome.RECENT_PROJECTS, "最近项目")
    put(I18nKeys.Welcome.VIEW_ALL, "查看全部")
    put(I18nKeys.Welcome.NO_RECENT_PROJECTS, "没有最近项目")
    put(I18nKeys.Welcome.NEW_FILE, "新建文件")
    put(I18nKeys.Welcome.OPEN_FILE, "打开文件")
    put(I18nKeys.Welcome.OPEN_PROJECT, "打开项目")

    put(I18nKeys.Navigation.NO_FILE_OPENED, "未打开文件")
    put(I18nKeys.Navigation.COPY_PATH, "复制路径")
    put(I18nKeys.Navigation.SELECT_IN_SIDEBAR, "在侧栏中选中")
    put(I18nKeys.Navigation.REVEAL_IN_EXPLORER, "在资源管理器中显示")

    put(I18nKeys.Plugins.NO_PLUGIN_SELECTED, "未选择插件")
    put(I18nKeys.Plugins.ID, "ID")
    put(I18nKeys.Plugins.VERSION, "版本")
    put(I18nKeys.Plugins.ORIGIN, "来源")
    put(I18nKeys.Plugins.STATE, "状态")
    put(I18nKeys.Plugins.PATH, "路径")
    put(I18nKeys.Plugins.PLUGINS_COUNT, "%d 个插件")
    put(I18nKeys.Plugins.SCAN_COMPLETED, "扫描完成")
    put(I18nKeys.Plugins.ENABLED, "已启用：%s")
    put(I18nKeys.Plugins.DISABLED, "已禁用：%s")
    put(I18nKeys.Plugins.REMOVED, "已卸载：%s")
    put(I18nKeys.Plugins.BUNDLED, "内置")
    put(I18nKeys.Plugins.BUILTIN_CANNOT_UNINSTALL, "内置插件不可卸载。\n插件：%s（%s）")
    put(I18nKeys.Plugins.CONFIRM_UNINSTALL, "确定要卸载插件：%s（%s）？\n若是 JAR 插件，建议从 plugins/ 目录删除对应文件。")
    put(I18nKeys.Plugins.UNINSTALL_FAILED, "卸载插件失败：%s（%s）")
    put(I18nKeys.Plugins.NO_PLUGIN_ENTRY, "已复制到 plugins/，但未发现新的插件入口（请检查 META-INF/services 配置）")
    put(I18nKeys.Plugins.INSTALLED_AND_STARTED, "安装成功并已启动：%s")

    put(I18nKeys.Keymap.ACTION, "功能")
    put(I18nKeys.Keymap.SHORTCUT, "Shortcut")
    put(I18nKeys.Keymap.DESCRIPTION, "说明")

    put(I18nKeys.ToolbarMessage.COMPILING, "正在编译，请稍候…")
    put(I18nKeys.ToolbarMessage.COMPILING_TITLE, "编译进行中")
    put(I18nKeys.ToolbarMessage.NOT_APKTOOL_DIR, "当前工作区不是 apktool 反编译目录（缺少 apktool.yml）")
    put(I18nKeys.ToolbarMessage.CANNOT_COMPILE, "无法编译")
    put(I18nKeys.ToolbarMessage.COMPILING_APK, "正在编译APK...")
    put(I18nKeys.ToolbarMessage.SIGNING_APK, "正在签名APK...")
    put(I18nKeys.ToolbarMessage.COMPILE_AND_SIGN_SUCCESS, "APK 编译并签名完成: %s")
    put(I18nKeys.ToolbarMessage.APK_GENERATED, "已生成并使用调试证书签名的 APK:\n%s")
    put(I18nKeys.ToolbarMessage.COMPILE_COMPLETE, "编译完成")
    put(I18nKeys.ToolbarMessage.SIGN_FAILED, "签名失败: %s")
    put(I18nKeys.ToolbarMessage.SIGN_FAILED_DETAIL, "APK 编译成功，但签名失败:\n%s")
    put(I18nKeys.ToolbarMessage.APKTOOL_NOT_FOUND, "未找到 apktool")
    put(I18nKeys.ToolbarMessage.APKTOOL_NOT_FOUND_DETAIL, "未找到 apktool，可执行文件需放在 toolchain/apktool 或 tools/apktool，或加入 PATH")
    put(I18nKeys.ToolbarMessage.COMPILE_CANCELLED, "APK 编译被取消")
    put(I18nKeys.ToolbarMessage.COMPILE_FAILED, "APK 编译失败 (exit=%d)")
    put(I18nKeys.ToolbarMessage.COMPILE_FAILED_DETAIL, "apktool 编译失败 (exit=%d)\n%s")
    put(I18nKeys.ToolbarMessage.COMPILE_EXCEPTION, "编译过程中出现异常: %s")
    put(I18nKeys.ToolbarMessage.KEYSTORE_NOT_FOUND, "未找到或无法创建 ~/.android/debug.keystore")
    put(I18nKeys.ToolbarMessage.APKSIGNER_NOT_FOUND, "未找到 apksigner，请设置 ANDROID_HOME/ANDROID_SDK_ROOT 或将 apksigner 加入 PATH")
    put(I18nKeys.ToolbarMessage.SIGN_EXCEPTION, "签名时发生未知错误")
    put(I18nKeys.ToolbarMessage.MANIFEST_NOT_FOUND, "未找到 AndroidManifest.xml 文件\n路径: %s")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_NOT_FOUND, "未找到 AndroidManifest.xml 文件，无法定位 MainActivity")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_NOT_FOUND_DETAIL, "在 AndroidManifest.xml 中未找到 MainActivity")
    put(I18nKeys.ToolbarMessage.MAINACTIVITY_SMALI_NOT_FOUND, "未找到 MainActivity 对应的 smali 文件\n类名: %s\n预期路径: %s")
    put(I18nKeys.ToolbarMessage.PARSE_MANIFEST_FAILED, "解析 AndroidManifest.xml 失败: %s")
    put(I18nKeys.ToolbarMessage.APPLICATION_NOT_FOUND, "未找到 AndroidManifest.xml 文件，无法定位 Application")
    put(I18nKeys.ToolbarMessage.APPLICATION_NOT_FOUND_DETAIL, "在 AndroidManifest.xml 中未找到自定义 Application")
    put(I18nKeys.ToolbarMessage.APPLICATION_SMALI_NOT_FOUND, "未找到 Application 对应的 smali 文件\n类名: %s\n预期路径: %s")
    put(I18nKeys.ToolbarMessage.NO_BUILD_PROVIDER, "当前工作区没有可用的构建提供者")
    put(I18nKeys.ToolbarMessage.BUILD_TOOL_NOT_FOUND, "未找到构建工具")
    put(I18nKeys.ToolbarMessage.COMPILE_SUCCESS, "构建成功: %s")
    put(I18nKeys.ToolbarMessage.BUILD_GENERATED, "构建产物已生成:\n%s")

    put(I18nKeys.Cache.CACHE_CONTENT, "缓存内容")
    put(I18nKeys.Cache.LOGS, "日志文件")
    put(I18nKeys.Cache.CACHE_DESC, "工作区与插件生成缓存")
    put(I18nKeys.Cache.LOGS_DESC, "运行日志，便于排查问题")
    put(I18nKeys.Cache.CONFIRM_CLEAR, "确认清理 %s？\n%s")
    put(I18nKeys.Cache.CANNOT_DELETE, "无法删除：%s")

    put(I18nKeys.Dialog.SELECT_PLUGIN_JAR, "选择插件 JAR")
    put(I18nKeys.Dialog.SELECT_FILE, "选择文件")
    put(I18nKeys.Dialog.PATH_NOT_EXISTS, "路径不存在: %s")
    put(I18nKeys.Dialog.UNABLE_TO_OPEN_SYSTEM, "无法在系统中打开: %s")
    put(I18nKeys.Dialog.COPY_PATH_FAILED, "复制路径失败: %s")
    put(I18nKeys.Dialog.PATH_COPIED, "已复制路径: %s")
    put(I18nKeys.Dialog.PLUGIN_SYSTEM_NOT_INIT, "插件系统尚未初始化")
    put(I18nKeys.Dialog.WORKSPACE_NOT_OPENED, "尚未打开工作区")
    put(I18nKeys.Dialog.SELECT_JAR_FILE, "请选择 .jar 文件")
    put(I18nKeys.Dialog.CONFIRM_OVERWRITE, "插件目录已存在同名文件：%s\n是否覆盖？")
    put(I18nKeys.Dialog.CANNOT_UNINSTALL, "无法卸载")
    put(I18nKeys.Dialog.CONFIRM_REMOVAL, "确认卸载")
    put(I18nKeys.Dialog.UNINSTALL_FAILED, "卸载插件失败：%s（%s）")
    put(I18nKeys.Dialog.COPY_FAILED, "复制失败：%s")
    put(I18nKeys.Dialog.DELETE_RECENT_PROJECT, "删除最近项目")
    put(I18nKeys.Dialog.OPEN_APK_FILE, "打开 APK 文件")
    put(I18nKeys.Dialog.DETECTED_APK, "检测到 APK 文件。是否要将其转换为项目（反编译）？")
    put(I18nKeys.Dialog.LANGUAGE_CHANGED, "语言已更改")
    put(I18nKeys.Dialog.LANGUAGE_CHANGED_MESSAGE, "新的语言将在下次应用程序启动时显示。")
    put(I18nKeys.Dialog.RESTART_REQUIRED, "需要重启")
    put(I18nKeys.Dialog.RESTART_REQUIRED_MESSAGE, "重启 EditorX 以使更改生效")
    put(I18nKeys.Dialog.RESTART, "重启")
    put(I18nKeys.Dialog.LATER, "以后再说")

    // 快捷键描述
    put(I18nKeys.Shortcut.GLOBAL_SEARCH, "打开全局搜索对话框")
    put(I18nKeys.Shortcut.OPEN_SETTINGS, "打开设置对话框")
    put(I18nKeys.Shortcut.FIND, "聚焦顶部搜索栏")
    put(I18nKeys.Shortcut.REPLACE, "展开替换行")
    put(I18nKeys.Shortcut.SAVE, "保存当前编辑内容")
    put(I18nKeys.Shortcut.CLOSE_TAB, "关闭当前标签页")
    put(I18nKeys.Shortcut.FORMAT_FILE, "格式化当前文件")

    // 语言名称使用动态生成的 key
    put(I18nKeys.Lang.forLocale(Locale.forLanguageTag("zh")), "中文")
    put(I18nKeys.Lang.forLocale(Locale.SIMPLIFIED_CHINESE), "中文（简体）")
    put(I18nKeys.Lang.forLocale(Locale.TRADITIONAL_CHINESE), "中文（繁体）")
    put(I18nKeys.Lang.forLocale(Locale.ENGLISH), "English")
}

class ChineseI18nPlugin : I18nPlugin(Locale.SIMPLIFIED_CHINESE) {

    override fun getInfo() = PluginInfo(
        id = "i18n-zh",
        name = "Chinese (i18n)",
        version = "0.0.1",
    )

    override fun translate(key: String): String? = dictionary[key]
}
